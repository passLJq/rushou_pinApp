!function(n){var o={};function i(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=228)}({0:function(t,e){t.exports=Vue},113:function(t,e,n){"use strict";var o=n(47);n.n(o).a},2:function(t,e,n){"use strict";function o(t,e,n,o,i,s,a,r){var u,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),o&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),a?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=r?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var p=c.render;c.render=function(t,e){return u.call(e),p(t,e)}}else{var l=c.beforeCreate;c.beforeCreate=l?[].concat(l,u):[u]}return{exports:t,options:c}}n.d(e,"a",function(){return o})},228:function(t,e,n){"use strict";n.r(e);function o(){var o=this,t=o.$createElement,i=o._self._c||t;return i("div",[0<o.unGet.length?i("div",{staticStyle:{"margin-top":"20px"}},o._l(o.unGet,function(e,n){return i("section",{key:e.couponid,staticClass:"couponbox"},[i("div",{staticClass:"coupon_left"},[i("p",{staticClass:"left_p1"},[i("span",[o._v("¥")]),o._v(o._s(e.facevalue))]),o._v(" "),i("p",{staticClass:"left_p2"},[o._v("满"+o._s(e.uselimit)+"可用")])]),o._v(" "),i("div",{staticClass:"coupon_main"},[i("p",{staticClass:"mp1"},[i("span",[o._v(o._s(e.companyname))]),o._v(o._s(e.name))]),o._v(" "),i("p",{staticClass:"mp2"},[o._v(o._s(e.couponalias))]),o._v(" "),i("p",{staticClass:"mp3"},[o._v(o._s(e.time))])]),o._v(" "),i("div",{staticClass:"coupon_right",on:{click:function(t){return o.lin(e.couponid,n)}}},[o._v("\n        立即领取\n      ")])])}),0):i("div",[o._m(0)])])}var i=n(0),s=n.n(i),a=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nodata",staticStyle:{"margin-top":"50px"}},[e("img",{staticStyle:{width:"30%"},attrs:{src:n(93),alt:""}}),this._v(" "),e("p",[this._v("暂时没有可领取优惠券~")])])}];o._withStripped=!0;var r={components:{},props:{},data:function(){return{hasGet:[],unGet:[]}},watch:{},computed:{},methods:{bindata:function(){this.hasGet=[],this.unGet=[],https({url:siteUrl+"Marketing/Coupon/GetGBCouponListJson",data:{uid:getname(),ispaltform:"0",comid:""},successBack:this.couponBack}),https({url:siteUrl+"Marketing/Coupon/GetGBCouponListJson",data:{uid:getname(),ispaltform:"1",comid:""},successBack:this.couponBack})},couponBack:function(t){var o=this,e=[];if(t.success&&1==t.status?t.Data.length&&(e=t.Data):promptMsg(t.err),e.length){var i=this.hasGet||[],s=this.unGet||[];e.forEach(function(t){if(t.time=o.getTime(t.starttime,t.endtime),t.state=o.getState(t.endtime),!t.isover&&0<t.eachamount-t.getnum&&2!=t.couponType&&3!=t.couponType){if(0<t.getnum)for(var e=0;e<t.getnum;e++)i.push(t);s.push(t)}else if(1<t.getnum)for(var n=0;n<t.getnum;n++)i.push(t);else i.push(t)}),i.length||(i=""),s.length||(s=""),this.hasGet=i,this.unGet=s}},lin:function(t,i){var s=this,a=this;checkLoginStatus()&&(showLoading(),https({url:siteUrl+"Marketing/Coupon/ReceiveCoupon?devicetype=7",data:{uid:getname(),couponid:t},headers:1,successBack:function(t){if(1==t.status&&t.success){var e=s.unGet||[],n=s.hasGet||[],o=e[i];o.getnum+=1,o.eachamount-o.getnum<=0?e.splice(i,1):e[i]=o,n.push(o),a.hasGet=n,a.unGet=a.unGet,alert("领取成功")}else promptMsg(t.err),a.bindata();hideLoading()}}))},getTime:function(t,e){var n=t.split(" ")[0],o=e.split(" ")[0],i=n.split("."),s=o.split(".");return i[0]+"年"+i[1]+"月"+i[2]+"日-"+s[0]+"年"+s[1]+"月"+s[2]+"日"},getState:function(t){var e=Date.now(),n=Date.parse(new Date(t))-e;return 0<n&&n<=432e6?1:n<=0?2:0}},created:function(){},mounted:function(){this.bindata()}},u=(n(113),n(2)),c=Object(u.a)(r,o,a,!1,null,null,null);c.options.__file="src/page/coupon_center/coupon_center.vue";var p=c.exports;openapp?window.apiready=function(){new s.a({render:function(t){return t(p)}}).$mount("#app")}:new s.a({render:function(t){return t(p)}}).$mount("#app")},47:function(t,e,n){},93:function(t,e,n){t.exports=n.p+"img/couponNoData1.png"}});